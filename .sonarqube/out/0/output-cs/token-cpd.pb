øâ
5D:\TCC\ReciGanhaMVC\Controllers\ClientesController.cs
	namespace 	
ReciGanhaMVC
 
. 
Controllers "
{ 
public 

class 
ClientesController #
:$ %

Controller& 0
{ 
public 
string 
uriBase 
= 
$str  I
;I J
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
>& '
IndexPageCliente( 8
(8 9
)9 :
{ 	
try 
{ 
string   
uriComplementar   &
=  ' (
$str  ) 2
;  2 3

HttpClient!! 

httpClient!! %
=!!& '
new!!( +

HttpClient!!, 6
(!!6 7
)!!7 8
;!!8 9
string"" 
token"" 
="" 
HttpContext"" *
.""* +
Session""+ 2
.""2 3
	GetString""3 <
(""< =
$str""= R
)""R S
;""S T

httpClient## 
.## !
DefaultRequestHeaders## 0
.##0 1
Authorization##1 >
=##? @
new##A D%
AuthenticationHeaderValue##E ^
(##^ _
$str##_ g
,##g h
token##i n
)##n o
;##o p
HttpResponseMessage%% #
response%%$ ,
=%%- .
await%%/ 4

httpClient%%5 ?
.%%? @
GetAsync%%@ H
(%%H I
$str%%I q
+%%r s
uriComplementar	%%t É
)
%%É Ñ
;
%%Ñ Ö
string&& 

serialized&& !
=&&" #
await&&$ )
response&&* 2
.&&2 3
Content&&3 :
.&&: ;
ReadAsStringAsync&&; L
(&&L M
)&&M N
;&&N O
string)) 
uriComplementar2)) '
=))( )
$str))) 4
;))4 5
HttpResponseMessage++ #
responseInfo++$ 0
=++1 2
await++3 8

httpClient++9 C
.++C D
GetAsync++D L
(++L M
uriBase++M T
+++U V
uriComplementar2++W g
)++g h
;++h i
string,, 
serializedInfo,, %
=,,& '
await,,( -
responseInfo,,. :
.,,: ;
Content,,; B
.,,B C
ReadAsStringAsync,,C T
(,,T U
),,U V
;,,V W
if.. 
(.. 
responseInfo.. 
...  

StatusCode..  *
==..+ -
System... 4
...4 5
Net..5 8
...8 9
HttpStatusCode..9 G
...G H
OK..H J
)..J K
{// 
ViewBag00 
.00 
Message00 #
=00$ %
serializedInfo00& 4
;004 5
}11 
if33 
(33 
response33 
.33 

StatusCode33 &
==33' )
System33* 0
.330 1
Net331 4
.334 5
HttpStatusCode335 C
.33C D
OK33D F
)33F G
{44 
List55 
<55 "
ClienteColetaViewModel55 /
>55/ 0
listaColetas551 =
=55> ?
await55@ E
Task55F J
.55J K
Run55K N
(55N O
(55O P
)55P Q
=>55R T
JsonConvert77 
.77  
DeserializeObject77  1
<771 2
List772 6
<776 7"
ClienteColetaViewModel777 M
>77M N
>77N O
(77O P

serialized77P Z
)77Z [
)77[ \
;77\ ]
return99 
View99 
(99  
$str99  -
,99- .
listaColetas99/ ;
)99; <
;99< =
}:: 
else;; 
throw<< 
new<< 
	Exception<< '
(<<' (

serialized<<( 2
)<<2 3
;<<3 4
}== 
catch>> 
(>> 
	Exception>> 
ex>> 
)>> 
{?? 
TempData@@ 
[@@ 
$str@@ '
]@@' (
=@@) *
ex@@+ -
.@@- .
Message@@. 5
;@@5 6
returnAA 
ViewAA 
(AA 
$strAA )
)AA) *
;AA* +
}BB 
}FF 	
[II 	
HttpGetII	 
]II 
publicJJ 
asyncJJ 
TaskJJ 
<JJ 
ActionResultJJ &
>JJ& '
ResgatarPontosAsyncJJ( ;
(JJ; <
ColetaViewModelJJ< K
cJJL M
)JJM N
{KK 	
tryLL 
{MM 
stringOO 
uriComplementarOO &
=OO' (
$strOO( 1
+OO2 3
cOO4 5
.OO5 6
IdColetaOO6 >
.OO> ?
ToStringOO? G
(OOG H
)OOH I
;OOI J

HttpClientQQ 

httpClientQQ %
=QQ& '
newQQ( +

HttpClientQQ, 6
(QQ6 7
)QQ7 8
;QQ8 9
stringRR 
tokenRR 
=RR 
HttpContextRR *
.RR* +
SessionRR+ 2
.RR2 3
	GetStringRR3 <
(RR< =
$strRR= R
)RRR S
;RRS T

httpClientSS 
.SS !
DefaultRequestHeadersSS 0
.SS0 1
AuthorizationSS1 >
=SS@ A
newSSB E%
AuthenticationHeaderValueSSF _
(SS_ `
$strSS` h
,SSh i
tokenSSj o
)SSo p
;SSp q
HttpResponseMessageTT #
responseTT$ ,
=TT- .
awaitTT/ 4

httpClientTT5 ?
.TT? @
GetAsyncTT@ H
(TTH I
uriBaseTTI P
+TTQ R
uriComplementarTTS b
)TTb c
;TTc d
stringUU 

serializedUU !
=UU" #
awaitUU$ )
responseUU* 2
.UU2 3
ContentUU3 :
.UU: ;
ReadAsStringAsyncUU; L
(UUL M
)UUM N
;UUN O
ifWW 
(WW 
responseWW 
.WW 

StatusCodeWW &
==WW' )
SystemWW* 0
.WW0 1
NetWW1 4
.WW4 5
HttpStatusCodeWW5 C
.WWC D
OKWWD F
)WWF G
{XX 
TempData\\ 
[\\ 
$str\\ '
]\\' (
=\\) *
string\\+ 1
.\\1 2
Format\\2 8
(\\8 9

serialized\\9 C
)\\C D
;\\D E
return]] 
RedirectToAction]] +
(]]+ ,
$str]], >
)]]> ?
;]]? @
}^^ 
else__ 
{`` 
throwaa 
newaa 
Systemaa $
.aa$ %
	Exceptionaa% .
(aa. /

serializedaa/ 9
)aa9 :
;aa: ;
}bb 
}cc 
catchdd 
(dd 
	Exceptiondd 
exdd 
)dd 
{ee 
TempDataff 
[ff 
$strff '
]ff' (
=ff) *
exff+ -
.ff- .
Messageff. 5
;ff5 6
returngg 
RedirectToActiongg '
(gg' (
$strgg( :
)gg: ;
;gg; <
}hh 
}kk 	
[pp 	
HttpPostpp	 
]pp 
publicqq 
asyncqq 
Taskqq 
<qq 
ActionResultqq &
>qq& '
AutenticarAsyncqq( 7
(qq7 8
ClienteViewModelqq8 H
cqqI J
)qqJ K
{rr 	
tryss 
{tt 
ifuu 
(uu 
stringuu 
.uu 
IsNullOrEmptyuu '
(uu' (
cuu( )
.uu) *
PasswordStringuu* 8
)uu8 9
)uu9 :
throwvv 
newvv 
	Exceptionvv '
(vv' (
$strvv( 8
)vv8 9
;vv9 :
ifxx 
(xx 
stringxx 
.xx 
IsNullOrEmptyxx '
(xx' (
cxx( )
.xx) *
EmailClientexx* 6
)xx6 7
)xx7 8
throwyy 
newyy 
	Exceptionyy '
(yy' (
$stryy( 8
)yy8 9
;yy9 :
if{{ 
({{ 

Validacoes{{ 
.{{ 
ValidarEmail{{ *
({{* +
c{{+ ,
.{{, -
EmailCliente{{- 9
){{9 :
=={{; =
false{{> C
){{C D
throw|| 
new|| 
	Exception|| '
(||' (
$str||( @
)||@ A
;||A B

HttpClient~~ 

httpClient~~ %
=~~& '
new~~( +

HttpClient~~, 6
(~~6 7
)~~7 8
;~~8 9
string 
uriComplementar &
=' (
$str) 5
;5 6
var
ÅÅ 
content
ÅÅ 
=
ÅÅ 
new
ÅÅ !
StringContent
ÅÅ" /
(
ÅÅ/ 0
JsonConvert
ÅÅ0 ;
.
ÅÅ; <
SerializeObject
ÅÅ< K
(
ÅÅK L
c
ÅÅL M
)
ÅÅM N
)
ÅÅN O
;
ÅÅO P
content
ÇÇ 
.
ÇÇ 
Headers
ÇÇ 
.
ÇÇ  
ContentType
ÇÇ  +
=
ÇÇ, -
new
ÇÇ. 1
System
ÇÇ2 8
.
ÇÇ8 9
Net
ÇÇ9 <
.
ÇÇ< =
Http
ÇÇ= A
.
ÇÇA B
Headers
ÇÇB I
.
ÇÇI J"
MediaTypeHeaderValue
ÇÇJ ^
(
ÇÇ^ _
$str
ÇÇ_ q
)
ÇÇq r
;
ÇÇr s!
HttpResponseMessage
ÉÉ #
response
ÉÉ$ ,
=
ÉÉ- .
await
ÉÉ/ 4

httpClient
ÉÉ5 ?
.
ÉÉ? @
	PostAsync
ÉÉ@ I
(
ÉÉI J
uriBase
ÉÉJ Q
+
ÉÉR S
uriComplementar
ÉÉT c
,
ÉÉc d
content
ÉÉd k
)
ÉÉk l
;
ÉÉl m
string
ÖÖ 

serialized
ÖÖ !
=
ÖÖ" #
await
ÖÖ$ )
response
ÖÖ* 2
.
ÖÖ2 3
Content
ÖÖ3 :
.
ÖÖ: ;
ReadAsStringAsync
ÖÖ; L
(
ÖÖL M
)
ÖÖM N
;
ÖÖN O
if
áá 
(
áá 
response
áá 
.
áá 

StatusCode
áá &
==
áá' )
System
áá* 0
.
áá0 1
Net
áá1 4
.
áá4 5
HttpStatusCode
áá5 C
.
ááC D
OK
ááD F
)
ááF G
{
àà 
HttpContext
ââ 
.
ââ  
Session
ââ  '
.
ââ' (
	SetString
ââ( 1
(
ââ1 2
$str
ââ2 G
,
ââG H

serialized
ââI S
)
ââS T
;
ââT U
TempData
ää 
[
ää 
$str
ää '
]
ää' (
=
ää) *
string
ää+ 1
.
ää1 2
Format
ää2 8
(
ää8 9
$str
ää9 K
,
ääK L
c
ääM N
.
ääN O
NomeCliente
ääO Z
)
ääZ [
;
ää[ \
return
ãã 
RedirectToAction
ãã +
(
ãã+ ,
$str
ãã, >
)
ãã> ?
;
ãã? @
}
åå 
else
çç 
{
éé 
throw
èè 
new
èè 
System
èè $
.
èè$ %
	Exception
èè% .
(
èè. /

serialized
èè/ 9
)
èè9 :
;
èè: ;
}
êê 
}
ëë 
catch
íí 
(
íí 
System
íí 
.
íí 
	Exception
íí "
ex
íí# %
)
íí% &
{
ìì 
TempData
îî 
[
îî 
$str
îî '
]
îî' (
=
îî) *
ex
îî+ -
.
îî- .
Message
îî. 5
;
îî5 6
return
ïï 
RedirectToAction
ïï '
(
ïï' (
$str
ïï( 4
)
ïï4 5
;
ïï5 6
}
ññ 
}
óó 	
[
ôô 	
HttpPost
ôô	 
]
ôô 
public
öö 
async
öö 
Task
öö 
<
öö 
ActionResult
öö &
>
öö& '
RegistrarAsync
öö( 6
(
öö6 7
ClienteViewModel
öö7 G
c
ööH I
)
ööI J
{
õõ 	
try
úú 
{
ùù 
if
ûû 
(
ûû 
string
ûû 
.
ûû 
IsNullOrEmpty
ûû (
(
ûû( )
c
ûû) *
.
ûû* +
NomeCliente
ûû+ 6
)
ûû6 7
)
ûû7 8
throw
üü 
new
üü 
	Exception
üü '
(
üü' (
$str
üü( C
)
üüC D
;
üüD E
if
°° 
(
°° 
string
°° 
.
°° 
IsNullOrEmpty
°° '
(
°°' (
c
°°( )
.
°°) *
PasswordString
°°* 8
)
°°8 9
)
°°9 :
throw
¢¢ 
new
¢¢ 
	Exception
¢¢ '
(
¢¢' (
$str
¢¢( 8
)
¢¢8 9
;
¢¢9 :
if
§§ 
(
§§ 
string
§§ 
.
§§ 
IsNullOrEmpty
§§ '
(
§§' (
c
§§( )
.
§§) *
EmailCliente
§§* 6
)
§§6 7
)
§§7 8
throw
•• 
new
•• 
	Exception
•• '
(
••' (
$str
••( 8
)
••8 9
;
••9 :
if
ßß 
(
ßß 

Validacoes
ßß 
.
ßß 
ValidarEmail
ßß *
(
ßß* +
c
ßß+ ,
.
ßß, -
EmailCliente
ßß- 9
)
ßß9 :
==
ßß; =
false
ßß> C
)
ßßC D
throw
®® 
new
®® 
	Exception
®® '
(
®®' (
$str
®®( @
)
®®@ A
;
®®A B

HttpClient
™™ 

httpClient
™™ %
=
™™& '
new
™™( +

HttpClient
™™, 6
(
™™6 7
)
™™7 8
;
™™8 9
string
´´ 
uriComplementar
´´ &
=
´´' (
$str
´´) 4
;
´´4 5
var
≠≠ 
content
≠≠ 
=
≠≠ 
new
≠≠ !
StringContent
≠≠" /
(
≠≠/ 0
JsonConvert
≠≠0 ;
.
≠≠; <
SerializeObject
≠≠< K
(
≠≠K L
c
≠≠L M
)
≠≠M N
)
≠≠N O
;
≠≠O P
content
ÆÆ 
.
ÆÆ 
Headers
ÆÆ 
.
ÆÆ  
ContentType
ÆÆ  +
=
ÆÆ, -
new
ÆÆ. 1
System
ÆÆ2 8
.
ÆÆ8 9
Net
ÆÆ9 <
.
ÆÆ< =
Http
ÆÆ= A
.
ÆÆA B
Headers
ÆÆB I
.
ÆÆI J"
MediaTypeHeaderValue
ÆÆJ ^
(
ÆÆ^ _
$str
ÆÆ_ q
)
ÆÆq r
;
ÆÆr s!
HttpResponseMessage
ØØ #
response
ØØ$ ,
=
ØØ- .
await
ØØ/ 4

httpClient
ØØ5 ?
.
ØØ? @
	PostAsync
ØØ@ I
(
ØØI J
uriBase
ØØJ Q
+
ØØR S
uriComplementar
ØØT c
,
ØØc d
content
ØØd k
)
ØØk l
;
ØØl m
string
±± 

serialized
±± !
=
±±" #
await
±±$ )
response
±±* 2
.
±±2 3
Content
±±3 :
.
±±: ;
ReadAsStringAsync
±±; L
(
±±L M
)
±±M N
;
±±N O
if
≥≥ 
(
≥≥ 
response
≥≥ 
.
≥≥ 

StatusCode
≥≥ &
==
≥≥' )
System
≥≥* 0
.
≥≥0 1
Net
≥≥1 4
.
≥≥4 5
HttpStatusCode
≥≥5 C
.
≥≥C D
OK
≥≥D F
)
≥≥F G
{
¥¥ 
TempData
µµ 
[
µµ 
$str
µµ '
]
µµ' (
=
µµ) *
string
µµ+ 1
.
µµ1 2
Format
µµ2 8
(
µµ8 9
$str
µµ9 }
,
µµ} ~
cµµ Ä
.µµÄ Å
NomeClienteµµÅ å
)µµå ç
;µµç é
return
∂∂ 
View
∂∂ 
(
∂∂  
$str
∂∂  3
)
∂∂3 4
;
∂∂4 5
}
∑∑ 
else
∏∏ 
{
ππ 
throw
∫∫ 
new
∫∫ 
System
∫∫ $
.
∫∫$ %
	Exception
∫∫% .
(
∫∫. /

serialized
∫∫/ 9
)
∫∫9 :
;
∫∫: ;
}
ªª 
}
ºº 
catch
ΩΩ 
(
ΩΩ 
System
ΩΩ 
.
ΩΩ 
	Exception
ΩΩ "
ex
ΩΩ# %
)
ΩΩ% &
{
ææ 
TempData
øø 
[
øø 
$str
øø '
]
øø' (
=
øø) *
ex
øø+ -
.
øø- .
Message
øø. 5
;
øø5 6
return
¿¿ 
RedirectToAction
¿¿ '
(
¿¿' (
$str
¿¿( 7
)
¿¿7 8
;
¿¿8 9
}
¡¡ 
}
¬¬ 	
[
≈≈ 	
HttpGet
≈≈	 
]
≈≈ 
public
∆∆ 
ActionResult
∆∆ 
IndexBuscarPostos
∆∆ -
(
∆∆- .
)
∆∆. /
{
«« 	
return
»» 
View
»» 
(
»» 
$str
»» -
)
»»- .
;
»». /
}
…… 	
[
ÃÃ 	
HttpGet
ÃÃ	 
]
ÃÃ 
public
ÕÕ 
ActionResult
ÕÕ 
IndexCadastro
ÕÕ )
(
ÕÕ) *
)
ÕÕ* +
{
ŒŒ 	
return
œœ 
View
œœ 
(
œœ 
$str
œœ *
)
œœ* +
;
œœ+ ,
}
–– 	
[
““ 	
HttpGet
““	 
]
““ 
public
”” 
ActionResult
”” 

IndexLogin
”” &
(
””& '
)
””' (
{
‘‘ 	
return
’’ 
View
’’ 
(
’’ 
$str
’’ +
)
’’+ ,
;
’’, -
}
÷÷ 	
}
ÿÿ 
}ŸŸ Ã:
3D:\TCC\ReciGanhaMVC\Controllers\ColetaController.cs
	namespace 	
ReciGanhaMVC
 
. 
Controllers "
{ 
public 

class 
Coleta 
: 

Controller $
{ 
public 
string 
uriBase 
= 
$str  H
;H I
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
ActionResult &
>& '
InsertAsync( 3
(3 4
NewColetaViewModel4 F
cG H
)H I
{ 	
try 
{ 
c 
. 
MaterialCadastro "
=# $
new% (
List) -
<- .
NewColetaViewModel. @
>@ A
(A B
)B C
;C D
NewColetaViewModel "
itemPlastico# /
=0 1
new2 5
NewColetaViewModel6 H
(H I
)I J
;J K
itemPlastico 
. 
TipMat #
=$ %
(& '
int' *
)* +
Models+ 1
.1 2
Enuns2 7
.7 8
TipoMaterialEnum8 H
.H I
PlasticoI Q
;Q R
itemPlastico   
.   
Pes    
=  ! "
c  # $
.  $ %
Plastico  % -
;  - .
c!! 
.!! 
MaterialCadastro!! "
.!!" #
Add!!# &
(!!& '
itemPlastico!!' 3
)!!3 4
;!!4 5
NewColetaViewModel$$ "
	itemMetal$$# ,
=$$- .
new$$/ 2
NewColetaViewModel$$3 E
($$E F
)$$F G
;$$G H
	itemMetal%% 
.%% 
TipMat%%  
=%%! "
(%%# $
int%%$ '
)%%' (
Models%%( .
.%%. /
Enuns%%/ 4
.%%4 5
TipoMaterialEnum%%5 E
.%%E F
Metal%%F K
;%%K L
	itemMetal&& 
.&& 
Pes&& 
=&& 
c&&  !
.&&! "
Metal&&" '
;&&' (
c'' 
.'' 
MaterialCadastro'' "
.''" #
Add''# &
(''& '
	itemMetal''' 0
)''0 1
;''1 2
NewColetaViewModel)) "
	itemPapel))# ,
=))- .
new))/ 2
NewColetaViewModel))3 E
())E F
)))F G
;))G H
	itemPapel** 
.** 
TipMat**  
=**! "
(**# $
int**$ '
)**' (
Models**( .
.**. /
Enuns**/ 4
.**4 5
TipoMaterialEnum**5 E
.**E F
Papel**F K
;**K L
	itemPapel++ 
.++ 
Pes++ 
=++ 
c++  !
.++! "
Papel++" '
;++' (
c,, 
.,, 
MaterialCadastro,, "
.,," #
Add,,# &
(,,& '
	itemPapel,,' 0
),,0 1
;,,1 2
NewColetaViewModel.. "
	itemVidro..# ,
=..- .
new../ 2
NewColetaViewModel..3 E
(..E F
)..F G
;..G H
	itemVidro// 
.// 
TipMat//  
=//! "
(//# $
int//$ '
)//' (
Models//( .
.//. /
Enuns/// 4
.//4 5
TipoMaterialEnum//5 E
.//E F
Vidro//F K
;//K L
	itemVidro00 
.00 
Pes00 
=00 
c00  !
.00! "
Vidro00" '
;00' (
c11 
.11 
MaterialCadastro11 "
.11" #
Add11# &
(11& '
	itemVidro11' 0
)110 1
;111 2
string:: 
uriComplementar:: &
=::' (
$str::) 2
+::3 4
c::5 6
.::6 7
EmailCliente::7 C
.::C D
ToString::D L
(::L M
)::M N
;::N O

HttpClient;; 

httpClient;; %
=;;& '
new;;( +

HttpClient;;, 6
(;;6 7
);;7 8
;;;8 9
string?? 
token?? 
=?? 
HttpContext?? *
.??* +
Session??+ 2
.??2 3
	GetString??3 <
(??< =
$str??= V
)??V W
;??W X

httpClientAA 
.AA !
DefaultRequestHeadersAA 0
.AA0 1
AuthorizationAA1 >
=AA? @
newAAA D%
AuthenticationHeaderValueAAE ^
(AA^ _
$strAA_ g
,AAg h
tokenAAi n
)AAn o
;AAo p
varDD 
contentDD 
=DD 
newDD !
StringContentDD" /
(DD/ 0
JsonConvertDD0 ;
.DD; <
SerializeObjectDD< K
(DDK L
cDDL M
.DDM N
MaterialCadastroDDN ^
)DD^ _
)DD_ `
;DD` a
contentEE 
.EE 
HeadersEE 
.EE  
ContentTypeEE  +
=EE, -
newEE. 1 
MediaTypeHeaderValueEE2 F
(EEF G
$strEEG Y
)EEY Z
;EEZ [
HttpResponseMessageHH #
responseHH$ ,
=HH- .
awaitHH/ 4

httpClientHH5 ?
.HH? @
	PostAsyncHH@ I
(HHI J
uriBaseHHJ Q
+HHR S
uriComplementarHHT c
,HHc d
contentHHe l
)HHl m
;HHm n
stringII 

serializedII !
=II" #
awaitII$ )
responseII* 2
.II2 3
ContentII3 :
.II: ;
ReadAsStringAsyncII; L
(IIL M
)IIM N
;IIN O
ifLL 
(LL 
responseLL 
.LL 

StatusCodeLL '
==LL( *
SystemLL+ 1
.LL1 2
NetLL2 5
.LL5 6
HttpStatusCodeLL6 D
.LLD E
OKLLE G
)LLG H
{MM 
TempDataPP 
[PP 
$strPP '
]PP' (
=PP) *
stringPP+ 1
.PP1 2
FormatPP2 8
(PP8 9
$strPP9 [
,PP[ \

serializedPP] g
)PPg h
;PPh i
returnRR 
ViewRR 
(RR  
$strRR  +
)RR+ ,
;RR, -
}SS 
elseTT 
throwUU 
newUU 
SystemUU $
.UU$ %
	ExceptionUU% .
(UU. /

serializedUU/ 9
)UU9 :
;UU: ;
}WW 
catchXX 
(XX 
	ExceptionXX 
exXX 
)XX  
{YY 
TempDataZZ 
[ZZ 
$strZZ #
]ZZ# $
=ZZ% &
exZZ' )
.ZZ) *
MessageZZ* 1
;ZZ1 2
return[[ 
RedirectToAction[[ '
([[' (
$str[[( 6
)[[6 7
;[[7 8
}\\ 
}]] 	
[__ 	
HttpGet__	 
]__ 
public`` 
ActionResult`` 
InsertColeta`` (
(``( )
)``) *
{aa 	
returnbb 
Viewbb 
(bb 
$strbb #
)bb# $
;bb$ %
}cc 	
publicee 
IActionResultee 
Indexee "
(ee" #
)ee# $
{ff 	
returngg 
Viewgg 
(gg 
)gg 
;gg 
}hh 	
}kk 
}ll Œ
1D:\TCC\ReciGanhaMVC\Controllers\HomeController.cs
	namespace

 	
ReciGanhaMVC


 
.

 
Controllers

 "
{ 
public 

class 
HomeController 
:  !

Controller" ,
{ 
private 
readonly 
ILogger  
<  !
HomeController! /
>/ 0
_logger1 8
;8 9
public 
HomeController 
( 
ILogger %
<% &
HomeController& 4
>4 5
logger6 <
)< =
{ 	
_logger 
= 
logger 
; 
} 	
public 
IActionResult 
Index "
(" #
)# $
{ 	
return 
View 
( 
) 
; 
} 	
public 
IActionResult 
Privacy $
($ %
)% &
{ 	
return 
View 
( 
) 
; 
} 	
[ 	
ResponseCache	 
( 
Duration 
=  !
$num" #
,# $
Location% -
=. /!
ResponseCacheLocation0 E
.E F
NoneF J
,J K
NoStoreL S
=T U
trueV Z
)Z [
][ \
public   
IActionResult   
Error   "
(  " #
)  # $
{!! 	
return"" 
View"" 
("" 
new"" 
ErrorViewModel"" *
{""+ ,
	RequestId""- 6
=""7 8
Activity""9 A
.""A B
Current""B I
?""I J
.""J K
Id""K M
??""N P
HttpContext""Q \
.""\ ]
TraceIdentifier""] l
}""m n
)""n o
;""o p
}## 	
}$$ 
}%% Ò'
5D:\TCC\ReciGanhaMVC\Controllers\ParceiroController.cs
	namespace 	
ReciGanhaMVC
 
. 
Controllers "
{ 
public 

class 
ParceiroController #
:$ %

Controller& 0
{ 
public 
string 
uriBase 
= 
$str  J
;J K
[ 	
HttpGet	 
] 
public 
ActionResult 
IndexPageParceiro -
(- .
). /
{ 	
return 
View 
( 
$str &
)& '
;' (
} 	
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
ActionResult &
>& '
RegistrarAsync( 6
(6 7
ParceiroViewModel7 H
pI J
)J K
{ 	
try 
{ 
if   
(   
string   
.   
IsNullOrEmpty   (
(  ( )
p  ) *
.  * +
NomeParceiro  + 7
)  7 8
)  8 9
throw!! 
new!! 
	Exception!! '
(!!' (
$str!!( B
)!!B C
;!!C D
if## 
(## 
string## 
.## 
IsNullOrEmpty## '
(##' (
p##( )
.##) *
CnpjParceiro##* 6
)##6 7
)##7 8
throw$$ 
new$$ 
	Exception$$ '
($$' (
$str$$( B
)$$B C
;$$C D
if&& 
(&& 
string&& 
.&& 
IsNullOrEmpty&& '
(&&' (
p&&( )
.&&) *
EmailParceiro&&* 7
)&&7 8
)&&8 9
throw'' 
new'' 
	Exception'' '
(''' (
$str''( 8
)''8 9
;''9 :
if)) 
()) 

Validacoes)) 
.)) 
ValidarEmail)) *
())* +
p))+ ,
.)), -
EmailParceiro))- :
))): ;
==))< >
false))? D
)))D E
throw** 
new** 
	Exception** '
(**' (
$str**( @
)**@ A
;**A B

HttpClient// 

httpClient// %
=//& '
new//( +

HttpClient//, 6
(//6 7
)//7 8
;//8 9
string00 
uriComplementar00 &
=00' (
$str00) 4
;004 5
var22 
content22 
=22 
new22 !
StringContent22" /
(22/ 0
JsonConvert220 ;
.22; <
SerializeObject22< K
(22K L
p22L M
)22M N
)22N O
;22O P
content33 
.33 
Headers33 
.33  
ContentType33  +
=33, -
new33. 1
System332 8
.338 9
Net339 <
.33< =
Http33= A
.33A B
Headers33B I
.33I J 
MediaTypeHeaderValue33J ^
(33^ _
$str33_ q
)33q r
;33r s
HttpResponseMessage44 #
response44$ ,
=44- .
await44/ 4

httpClient445 ?
.44? @
	PostAsync44@ I
(44I J
uriBase44J Q
+44R S
uriComplementar44T c
,44c d
content44d k
)44k l
;44l m
string66 

serialized66 !
=66" #
await66$ )
response66* 2
.662 3
Content663 :
.66: ;
ReadAsStringAsync66; L
(66L M
)66M N
;66N O
if88 
(88 
response88 
.88 

StatusCode88 &
==88' )
System88* 0
.880 1
Net881 4
.884 5
HttpStatusCode885 C
.88C D
OK88D F
)88F G
{99 
TempData:: 
[:: 
$str:: '
]::' (
=::) *
string::+ 1
.::1 2
Format::2 8
(::8 9
$str::9 c
,::c d
p::e f
.::f g
NomeParceiro::g s
)::s t
;::t u
return;; 
RedirectToAction;; +
(;;+ ,
$str;;, 3
,;;3 4
$str;;5 ;
);;; <
;;;< =
}<< 
else== 
{>> 
throw?? 
new?? 
System?? $
.??$ %
	Exception??% .
(??. /

serialized??/ 9
)??9 :
;??: ;
}@@ 
}AA 
catchBB 
(BB 
SystemBB 
.BB 
	ExceptionBB "
exBB# %
)BB% &
{CC 
TempDataDD 
[DD 
$strDD '
]DD' (
=DD) *
exDD+ -
.DD- .
MessageDD. 5
;DD5 6
returnEE 
RedirectToActionEE '
(EE' (
$strEE( /
,EE/ 0
$strEE1 7
)EE7 8
;EE8 9
}FF 
}GG 	
}LL 
}MM ©J
:D:\TCC\ReciGanhaMVC\Controllers\PostoDeColetaController.cs
	namespace 	
ReciGanhaMVC
 
. 
Controllers "
{ 
public 

class #
PostoDeColetaController (
:) *

Controller+ 5
{ 
public 
string 
uriBase 
= 
$str  O
;O P
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
ActionResult &
>& '
AutenticarAsync( 7
(7 8"
PostoDeColetaViewModel8 N
pO P
)P Q
{ 	
try 
{ 
if 
( 
string 
. 
IsNullOrEmpty '
(' (
p( )
.) *
CNPJ* .
). /
)/ 0
throw 
new 
	Exception '
(' (
$str( 7
)7 8
;8 9
if 
( 

Validacoes 
. 
ValidarTamanhoCnpj 0
(0 1
p1 2
.2 3
CNPJ3 7
)7 8
==9 ;
false< A
)A B
throw 
new 
	Exception '
(' (
$str( G
)G H
;H I
if 
( 

Validacoes 
. 
IsCnpj $
($ %
p% &
.& '
CNPJ' +
)+ ,
==- /
false0 5
)5 6
throw 
new 
	Exception '
(' (
$str( ?
)? @
;@ A

HttpClient   

httpClient   %
=  & '
new  ( +

HttpClient  , 6
(  6 7
)  7 8
;  8 9
string!! 
uriComplementar!! &
=!!' (
$str!!) 5
;!!5 6
var## 
content## 
=## 
new## !
StringContent##" /
(##/ 0
JsonConvert##0 ;
.##; <
SerializeObject##< K
(##K L
p##L M
)##M N
)##N O
;##O P
content$$ 
.$$ 
Headers$$ 
.$$  
ContentType$$  +
=$$, -
new$$. 1
System$$2 8
.$$8 9
Net$$9 <
.$$< =
Http$$= A
.$$A B
Headers$$B I
.$$I J 
MediaTypeHeaderValue$$J ^
($$^ _
$str$$_ q
)$$q r
;$$r s
HttpResponseMessage%% #
response%%$ ,
=%%- .
await%%/ 4

httpClient%%5 ?
.%%? @
	PostAsync%%@ I
(%%I J
uriBase%%J Q
+%%R S
uriComplementar%%T c
,%%d e
content%%e l
)%%l m
;%%m n
string'' 

serialized'' !
=''" #
await''$ )
response''* 2
.''2 3
Content''3 :
.'': ;
ReadAsStringAsync''; L
(''L M
)''M N
;''N O
if)) 
()) 
response)) 
.)) 

StatusCode)) &
==))' )
System))* 0
.))0 1
Net))1 4
.))4 5
HttpStatusCode))5 C
.))C D
OK))D F
)))F G
{** 
HttpContext++ 
.++  
Session++  '
.++' (
	SetString++( 1
(++1 2
$str++2 K
,++K L

serialized++M W
)++W X
;++X Y
TempData,, 
[,, 
$str,, '
],,' (
=,,) *
string,,+ 1
.,,1 2
Format,,2 8
(,,8 9
$str,,9 I
,,,I J
p,,K L
.,,L M
	NomePosto,,M V
),,V W
;,,W X
return-- 
View-- 
(--  
$str--  +
)--+ ,
;--, -
}.. 
else// 
{00 
throw11 
new11 
System11 $
.11$ %
	Exception11% .
(11. /

serialized11/ 9
)119 :
;11: ;
}22 
}33 
catch44 
(44 
	Exception44 
ex44 
)44 
{55 
TempData66 
[66 
$str66 (
]66( )
=66* +
ex66, .
.66. /
Message66/ 6
;666 7
return77 
View77 
(77 
$str77 5
)775 6
;776 7
}88 
}99 	
[;; 	
HttpPost;;	 
];; 
public<< 
async<< 
Task<< 
<<< 
ActionResult<< &
><<& '
RegistrarAsync<<( 6
(<<6 7"
PostoDeColetaViewModel<<7 M
p<<N O
)<<O P
{== 	
try>> 
{?? 
if@@ 
(@@ 
string@@ 
.@@ 
IsNullOrEmpty@@ '
(@@' (
p@@( )
.@@) *
CNPJ@@* .
)@@. /
)@@/ 0
throwAA 
newAA 
	ExceptionAA '
(AA' (
$strAA( 7
)AA7 8
;AA8 9
ifCC 
(CC 
stringCC 
.CC 
IsNullOrEmptyCC '
(CC' (
pCC( )
.CC) *
	NomePostoCC* 3
)CC3 4
)CC4 5
throwDD 
newDD 
	ExceptionDD '
(DD' (
$strDD( J
)DDJ K
;DDK L
ifFF 
(FF 

ValidacoesFF 
.FF 
ValidarTamanhoCnpjFF 0
(FF0 1
pFF1 2
.FF2 3
CNPJFF3 7
)FF7 8
==FF9 ;
falseFF< A
)FFA B
throwGG 
newGG 
	ExceptionGG '
(GG' (
$strGG( G
)GGG H
;GGH I
ifII 
(II 

ValidacoesII 
.II 
IsCnpjII $
(II$ %
pII% &
.II& '
CNPJII' +
)II+ ,
==II- /
falseII0 5
)II5 6
throwJJ 
newJJ 
	ExceptionJJ '
(JJ' (
$strJJ( ?
)JJ? @
;JJ@ A

HttpClientMM 

httpClientMM %
=MM& '
newMM( +

HttpClientMM, 6
(MM6 7
)MM7 8
;MM8 9
stringNN 
uriComplementarNN &
=NN' (
$strNN) 4
;NN4 5
varOO 
contentOO 
=OO 
newOO !
StringContentOO" /
(OO/ 0
JsonConvertOO0 ;
.OO; <
SerializeObjectOO< K
(OOK L
pOOL M
)OOM N
)OON O
;OOO P
contentPP 
.PP 
HeadersPP 
.PP  
ContentTypePP  +
=PP, -
newPP. 1
SystemPP2 8
.PP8 9
NetPP9 <
.PP< =
HttpPP= A
.PPA B
HeadersPPB I
.PPI J 
MediaTypeHeaderValuePPJ ^
(PP^ _
$strPP_ q
)PPq r
;PPr s
HttpResponseMessageQQ #
responseQQ$ ,
=QQ- .
awaitQQ/ 4

httpClientQQ5 ?
.QQ? @
	PostAsyncQQ@ I
(QQI J
uriBaseQQJ Q
+QQR S
uriComplementarQQT c
,QQc d
contentQQd k
)QQk l
;QQl m
stringSS 
PostoSerializedSS &
=SS' (
awaitSS) .
responseSS/ 7
.SS7 8
ContentSS8 ?
.SS? @
ReadAsStringAsyncSS@ Q
(SSQ R
)SSR S
;SSS T
ifUU 
(UU 
responseUU 
.UU 

StatusCodeUU &
==UU' )
SystemUU* 0
.UU0 1
NetUU1 4
.UU4 5
HttpStatusCodeUU5 C
.UUC D
OKUUD F
)UUF G
{VV 
TempDataWW 
[WW 
$strWW '
]WW' (
=WW) *
stringWW+ 1
.WW1 2
FormatWW2 8
(WW8 9
$strWW9 u
,WWu v
pWWw x
.WWx y
	NomePosto	WWy Ç
)
WWÇ É
;
WWÉ Ñ
returnXX 
ViewXX 
(XX  
$strXX  9
)XX9 :
;XX: ;
}YY 
elseZZ 
{[[ 
throw\\ 
new\\ 
System\\ $
.\\$ %
	Exception\\% .
(\\. /
PostoSerialized\\/ >
)\\> ?
;\\? @
}]] 
}^^ 
catch__ 
(__ 
	Exception__ 
ex__ 
)__ 
{`` 
TempDataaa 
[aa 
$straa '
]aa' (
=aa) *
exaa+ -
.aa- .
Messageaa. 5
;aa5 6
returnbb 
Viewbb 
(bb 
$strbb 4
,bb4 5
pbb6 7
)bb7 8
;bb8 9
}cc 
}dd 	
[ee 	
HttpGetee	 
]ee 
publicff 
ActionResultff 
IndexCadastroPostoff .
(ff. /
)ff/ 0
{gg 	
returnhh 
Viewhh 
(hh 
$strhh 0
)hh0 1
;hh1 2
}ii 	
[kk 	
HttpGetkk	 
]kk 
publicll 
ActionResultll  
IndexAutenticarPostoll 0
(ll0 1
)ll1 2
{mm 	
returnnn 
Viewnn 
(nn 
$strnn 1
)nn1 2
;nn2 3
}oo 	
}pp 
}ss à9
7D:\TCC\ReciGanhaMVC\Controllers\RecompensaController.cs
	namespace 	
ReciGanhaMVC
 
. 
Controllers "
{ 
public 

class  
RecompensaController %
:& '

Controller( 2
{ 
public 
string 
uriBase 
= 
$str  L
;L M
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
>& '
Resgatar( 0
(0 1
int1 4
?4 5
id6 8
)8 9
{ 	
try 
{ 
string 
uriComplementar &
=' (
$str) 4
;4 5

HttpClient 

httpClient %
=& '
new( +

HttpClient, 6
(6 7
)7 8
;8 9
string 
token 
= 
HttpContext *
.* +
Session+ 2
.2 3
	GetString3 <
(< =
$str= R
)R S
;S T

httpClient 
. !
DefaultRequestHeaders 0
.0 1
Authorization1 >
=? @
newA D%
AuthenticationHeaderValueE ^
(^ _
$str_ g
,g h
tokeni n
)n o
;o p
HttpResponseMessage #
response$ ,
=- .
await/ 4

httpClient5 ?
.? @
GetAsync@ H
(H I
$strI u
+u v
uriComplementar	w Ü
+
á à
id
â ã
.
ã å
ToString
å î
(
î ï
)
ï ñ
)
ñ ó
;
ó ò
string 

serialized !
=" #
await$ )
response* 2
.2 3
Content3 :
.: ;
ReadAsStringAsync; L
(L M
)M N
;N O
string"" 
uriComplementarInfo"" .
=""/ 0
$str""1 9
;""9 :
HttpResponseMessage## '
responseInfo##( 4
=##5 6
await##7 <

httpClient##= G
.##G H
GetAsync##H P
(##P Q
uriBase##Q X
+##Y Z
uriComplementarInfo##[ n
)##o p
;##p q
string$$ 
serializedInfo$$ )
=$$* +
await$$, 1
responseInfo$$2 >
.$$> ?
Content$$? F
.$$F G
ReadAsStringAsync$$G X
($$X Y
)$$Y Z
;$$Z [
if)) 
()) 
responseInfo)) 
.))  

StatusCode))  *
==))+ -
System)). 4
.))4 5
Net))5 8
.))8 9
HttpStatusCode))9 G
.))G H
OK))H J
)))J K
{** 
List++ 
<++ 
RecompensaViewModel++ ,
>++, -
listaRecompensas++. >
=++> ?
await++@ E
Task++F J
.++J K
Run++K N
(++N O
(++O P
)++P Q
=>++R T
JsonConvert-- 
.--  
DeserializeObject--  1
<--1 2
List--2 6
<--6 7
RecompensaViewModel--7 J
>--J K
>--K L
(--L M
serializedInfo--M [
)--[ \
)--\ ]
;--] ^
TempData// 
[// 
$str// /
]/// 0
=//1 2

serialized//3 =
;//= >
return11 
View11 
(11  
$str11  2
,112 3
listaRecompensas114 D
)11D E
;11E F
}22 
else33 
throw44 
new44 
	Exception44 '
(44' (

serialized44( 2
)442 3
;443 4
}55 
catch66 
(66 
	Exception66 
ex66 
)66 
{77 
TempData88 
[88 
$str88 '
]88' (
=88) *
ex88+ -
.88- .
Message88. 5
;885 6
return99 
View99 
(99 
$str99 .
)99. /
;99/ 0
}:: 
};; 	
[?? 	
HttpGet??	 
]?? 
public@@ 
async@@ 
Task@@ 
<@@ 
ActionResult@@ &
>@@& '
IndexRecompensa@@( 7
(@@7 8
)@@8 9
{AA 	
tryBB 
{CC 
stringDD 
uriComplementarDD &
=DD' (
$strDD) 1
;DD1 2

HttpClientEE 

httpClientEE %
=EE& '
newEE( +

HttpClientEE, 6
(EE6 7
)EE7 8
;EE8 9
stringFF 
tokenFF 
=FF 
HttpContextFF *
.FF* +
SessionFF+ 2
.FF2 3
	GetStringFF3 <
(FF< =
$strFF= R
)FFR S
;FFS T

httpClientGG 
.GG !
DefaultRequestHeadersGG 0
.GG0 1
AuthorizationGG1 >
=GG? @
newGGA D%
AuthenticationHeaderValueGGE ^
(GG^ _
$strGG_ g
,GGg h
tokenGGi n
)GGn o
;GGo p
HttpResponseMessageII #
responseII$ ,
=II- .
awaitII/ 4

httpClientII5 ?
.II? @
GetAsyncII@ H
(IIH I
uriBaseIII P
+IIQ R
uriComplementarIIS b
)IIb c
;IIc d
stringJJ 

serializedJJ !
=JJ" #
awaitJJ$ )
responseJJ* 2
.JJ2 3
ContentJJ3 :
.JJ: ;
ReadAsStringAsyncJJ; L
(JJL M
)JJM N
;JJN O
ifMM 
(MM 
responseMM 
.MM 

StatusCodeMM &
==MM' )
SystemMM* 0
.MM0 1
NetMM1 4
.MM4 5
HttpStatusCodeMM5 C
.MMC D
OKMMD F
)MMF G
{NN 
ListOO 
<OO 
RecompensaViewModelOO ,
>OO, -
listaRecompensasOO. >
=OO> ?
awaitOO@ E
TaskOOF J
.OOJ K
RunOOK N
(OON O
(OOO P
)OOP Q
=>OOR T
JsonConvertQQ 
.QQ  
DeserializeObjectQQ  1
<QQ1 2
ListQQ2 6
<QQ6 7
RecompensaViewModelQQ7 J
>QQJ K
>QQK L
(QQL M

serializedQQM W
)QQW X
)QQX Y
;QQY Z
returnSS 
ViewSS 
(SS  
$strSS  2
,SS2 3
listaRecompensasSS4 D
)SSD E
;SSE F
}TT 
elseUU 
throwVV 
newVV 
	ExceptionVV '
(VV' (

serializedVV( 2
)VV2 3
;VV3 4
}XX 
catchYY 
(YY 
	ExceptionYY 
exYY 
)YY 
{ZZ 
TempData[[ 
[[[ 
$str[[ '
][[' (
=[[) *
ex[[+ -
.[[- .
Message[[. 5
;[[5 6
return\\ 
View\\ 
(\\ 
$str\\ .
)\\. /
;\\/ 0
}]] 
}^^ 	
}__ 
}`` Ö
4D:\TCC\ReciGanhaMVC\Models\ClienteColetaViewModel.cs
	namespace 	
ReciGanhaMVC
 
. 
Models 
{ 
public		 

class		 "
ClienteColetaViewModel		 '
{

 
public 
int 
IdColeta 
{ 
get  
;  !
set! $
;$ %
}% &
public 
float 
resultadoDePontos &
{& '
get' *
;* +
set, /
;/ 0
}0 1
public 
DateTime 

dataColeta "
{# $
get$ '
;' (
set) ,
;, -
}- .
public 
string 
	Nomeposto 
{  
get  #
;# $
set% (
;( )
}) *
} 
} á
.D:\TCC\ReciGanhaMVC\Models\ClienteViewModel.cs
	namespace 	
ReciGanhaMVC
 
. 
Models 
{ 
public 

class 
ClienteViewModel !
{		 
public

 
int

 
	IdCliente

 
{

 
get

 !
;

! "
set

# &
;

& '
}

' (
public 
string 
NomeCliente !
{! "
get" %
;% &
set' *
;* +
}+ ,
public 
string 
EmailCliente "
{# $
get$ '
;' (
set) ,
;, -
}- .
public 
string 
TelefoneCliente %
{% &
get& )
;) *
set+ .
;. /
}/ 0
public 
float 
Pontos 
{ 
get !
;! "
set# &
;& '
}( )
public 
byte 
[ 
] 
PasswordHash "
{# $
get$ '
;' (
set) ,
;, -
}- .
public 
byte 
[ 
] 
PasswordSalt "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
PasswordString $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
List 
< 
ColetaViewModel #
># $
listaColetas% 1
{2 3
get3 6
;6 7
set8 ;
;; <
}< =
} 
} ©	
-D:\TCC\ReciGanhaMVC\Models\ColetaViewModel.cs
	namespace 	
ReciGanhaMVC
 
. 
Models 
{ 
public 

class 
ColetaViewModel  
{		 
public

 
int

 
	IdCliente

 
{

 
get

 !
;

! "
set

# &
;

& '
}

' (
public 
int 
IdColeta 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 
idPosto 
{ 
get 
;  
set! $
;$ %
}% &
public 
float 
resultadoDePontos &
{& '
get' *
;* +
set, /
;/ 0
}0 1
public 
DateTime 

dataColeta "
{# $
get$ '
;' (
set) ,
;, -
}- .
public 
int 
statusColeta 
{  
get  #
;# $
set% (
;( )
}) *
} 
} ¶
4D:\TCC\ReciGanhaMVC\Models\Enuns\TipoMaterialEnum.cs
	namespace 	
ReciGanhaMVC
 
. 
Models 
. 
Enuns #
{ 
public 

enum 
TipoMaterialEnum  
{ 
Plastico 
= 
$num 
, 
Metal 
= 
$num 
, 
Papel 
= 
$num 
, 
Vidro		 
=		 
$num		 
}

 
} ˙
,D:\TCC\ReciGanhaMVC\Models\ErrorViewModel.cs
	namespace 	
ReciGanhaMVC
 
. 
Models 
{ 
public 

class 
ErrorViewModel 
{ 
public 
string 
	RequestId 
{  !
get" %
;% &
set' *
;* +
}, -
public		 
bool		 
ShowRequestId		 !
=>		" $
!		% &
string		& ,
.		, -
IsNullOrEmpty		- :
(		: ;
	RequestId		; D
)		D E
;		E F
}

 
} ô
.D:\TCC\ReciGanhaMVC\Models\MateriaisAceitos.cs
	namespace 	
ReciGanhaMVC
 
. 
Models 
{ 
public		 

class		 
MateriaisAceitos		 !
{

 
public 
int 
PostoDeColetaId "
{# $
get$ '
;' (
set) ,
;, -
}- .
public "
PostoDeColetaViewModel %
PostoDeColeta& 3
{4 5
get6 9
;9 :
set; >
;> ?
}? @
public 
int 
TipoMaterialId !
{" #
get# &
;& '
set( +
;+ ,
}, -
public 
TipoMaterialEnum 
TipoMaterial  ,
{- .
get/ 2
;2 3
set4 7
;7 8
}8 9
} 
} ì
0D:\TCC\ReciGanhaMVC\Models\NewColetaViewModel.cs
	namespace 	
ReciGanhaMVC
 
. 
Models 
{ 
public 

class 
NewColetaViewModel #
{		 
public

 
int

 
TipMat

 
{

 
get

 
;

 
set

  #
;

# $
}

$ %
public 
float 
Pes 
{ 
get 
; 
set !
;! "
}" #
public 
List 
< 
NewColetaViewModel &
>& '
MaterialCadastro( 8
{9 :
get; >
;> ?
set@ C
;C D
}E F
public 
string 
EmailCliente "
{# $
get$ '
;' (
set) ,
;, -
}- .
public 
float 
Plastico 
{ 
get  #
;# $
set% (
;( )
}* +
public 
float 
Metal 
{ 
get  
;  !
set" %
;% &
}' (
public 
float 
Papel 
{ 
get  
;  !
set" %
;% &
}' (
public 
float 
Vidro 
{ 
get  
;  !
set" %
;% &
}' (
} 
} €	
/D:\TCC\ReciGanhaMVC\Models\ParceiroViewModel.cs
	namespace 	
ReciGanhaMVC
 
. 
Models 
{ 
public 

class 
ParceiroViewModel "
{		 
public

 
int

 

IdParceiro

 
{

 
get

 "
;

" #
set

$ '
;

' (
}

( )
public 
string 
NomeParceiro "
{# $
get$ '
;' (
set) ,
;, -
}- .
public 
string 
EmailParceiro #
{$ %
get% (
;( )
set* -
;- .
}. /
public 
string 
CnpjParceiro "
{" #
get# &
;& '
set( +
;+ ,
}, -
public 
byte 
[ 
] 
FotoParceiro "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
RegiaoParceiro $
{% &
get& )
;) *
set+ .
;. /
}/ 0
} 
} ‘
4D:\TCC\ReciGanhaMVC\Models\PostoDeColetaViewModel.cs
	namespace 	
ReciGanhaMVC
 
. 
Models 
{ 
public 

class "
PostoDeColetaViewModel '
{		 
public

 
int

 
IdPosto

 
{

 
get

  
;

  !
set

" %
;

% &
}

' (
public 
string 
	NomePosto 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
CNPJ 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
? 

EmailPosto !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
? 
TelefonePosto $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
? 
WebSite 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Latitude 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
	Longitude 
{  !
get" %
;% &
set' *
;* +
}, -
public 
DateTime 
DataLimiteExibicao *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
int 
StatusPosto 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
byte 
[ 
] 
PasswordHash "
{# $
get$ '
;' (
set) ,
;, -
}- .
public 
byte 
[ 
] 
PasswordSalt "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
PasswordString $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
List 
< 
MateriaisAceitos $
>$ %
MateriaisAceitos& 6
{7 8
get9 <
;< =
set> A
;A B
}C D
} 
} ¢
1D:\TCC\ReciGanhaMVC\Models\RecompensaViewModel.cs
	namespace 	
ReciGanhaMVC
 
. 
Models 
{ 
public 

class 
RecompensaViewModel $
{		 
public

 
int

 
idRecompensa

 
{

  !
get

! $
;

$ %
set

& )
;

) *
}

* +
public 
string 
nomeRecompensa $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
	descricao 
{  !
get" %
;% &
set' *
;* +
}, -
public 
float 
custodePontos "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
int 
qtdeRecomepensas #
{$ %
get& )
;) *
set+ .
;. /
}0 1
} 
} ‚
,D:\TCC\ReciGanhaMVC\Models\TesteViewModel.cs
	namespace 	
ReciGanhaMVC
 
. 
Models 
{ 
public		 

class		 
TesteViewModel		 
{

 
public 
TesteViewModel 
( 
) 
{ 	
ListaColetas 
= 
new 
List #
<# $
ColetaViewModel$ 3
>3 4
(4 5
)5 6
;6 7
ListaClientes 
= 
new 
List  $
<$ %
ClienteViewModel% 5
>5 6
(6 7
)7 8
;8 9
} 	
public 
List 
< 
ColetaViewModel #
># $
ListaColetas% 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
public 
List 
< 
ClienteViewModel $
>$ %
ListaClientes& 3
{4 5
get6 9
;9 :
set; >
;> ?
}@ A
public 
ClienteViewModel 
ClienteCadastro  /
{0 1
get2 5
;5 6
set7 :
;: ;
}< =
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
	Descricao 
{  !
get" %
;% &
set' *
;* +
}, -
} 
} ¯	
D:\TCC\ReciGanhaMVC\Program.cs
	namespace

 	
ReciGanhaMVC


 
{ 
public 

class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
{ 	
CreateHostBuilder 
( 
args "
)" #
.# $
Build$ )
() *
)* +
.+ ,
Run, /
(/ 0
)0 1
;1 2
} 	
public 
static 
IHostBuilder "
CreateHostBuilder# 4
(4 5
string5 ;
[; <
]< =
args> B
)B C
=>D F
Host 
.  
CreateDefaultBuilder %
(% &
args& *
)* +
. $
ConfigureWebHostDefaults )
() *

webBuilder* 4
=>5 7
{ 

webBuilder 
. 

UseStartup )
<) *
Startup* 1
>1 2
(2 3
)3 4
;4 5
} 
) 
; 
} 
} ª
D:\TCC\ReciGanhaMVC\Startup.cs
	namespace 	
ReciGanhaMVC
 
{ 
public 

class 
Startup 
{ 
public 
Startup 
( 
IConfiguration %
configuration& 3
)3 4
{ 	
Configuration 
= 
configuration )
;) *
} 	
public 
IConfiguration 
Configuration +
{, -
get. 1
;1 2
}3 4
public 
void 
ConfigureServices %
(% &
IServiceCollection& 8
services9 A
)A B
{ 	
services 
. #
AddControllersWithViews ,
(, -
)- .
;. /
services 
. 

AddSession 
(  
option  &
=>' )
{) *
option* 0
.0 1
IdleTimeout1 <
== >
System? E
.E F
TimeSpanF N
.N O
FromSecondsO Z
(Z [
$num[ _
)_ `
;` a
}a b
)b c
;c d
} 	
public!! 
void!! 
	Configure!! 
(!! 
IApplicationBuilder!! 1
app!!2 5
,!!5 6
IWebHostEnvironment!!7 J
env!!K N
)!!N O
{"" 	
if## 
(## 
env## 
.## 
IsDevelopment## !
(##! "
)##" #
)### $
{$$ 
app%% 
.%% %
UseDeveloperExceptionPage%% -
(%%- .
)%%. /
;%%/ 0
}&& 
else'' 
{(( 
app)) 
.)) 
UseExceptionHandler)) '
())' (
$str))( 5
)))5 6
;))6 7
app++ 
.++ 
UseHsts++ 
(++ 
)++ 
;++ 
},, 
app-- 
.-- 
UseHttpsRedirection-- #
(--# $
)--$ %
;--% &
app.. 
... 
UseStaticFiles.. 
(.. 
)..  
;..  !
app00 
.00 

UseRouting00 
(00 
)00 
;00 
app22 
.22 
UseAuthorization22  
(22  !
)22! "
;22" #
app55 
.55 

UseSession55 
(55 
)55 
;55 
app77 
.77 
UseEndpoints77 
(77 
	endpoints77 &
=>77' )
{88 
	endpoints99 
.99 
MapControllerRoute99 ,
(99, -
name:: 
::: 
$str:: #
,::# $
pattern;; 
:;; 
$str;; E
);;E F
;;;F G
}<< 
)<< 
;<< 
}== 	
}>> 
}?? •5
'D:\TCC\ReciGanhaMVC\Utils\Validacoes.cs
	namespace 	
ReciGanhaMVC
 
. 
Utils 
{ 
public		 

class		 

Validacoes		 
{

 
public 
static 
bool 
ValidarTamanhoCnpj -
(- .
string. 4
cnpj5 9
)9 :
{ 	
if 
( 
cnpj 
. 
Replace 
( 
$str  
,  !
$str" $
)$ %
.% &
Replace& -
(- .
$str. 1
,1 2
$str3 5
)5 6
.6 7
Replace7 >
(> ?
$str? B
,B C
$strD F
)F G
.G H
LengthH N
!=O Q
$numR T
)T U
return 
false 
; 
else 
return 
true 
; 
} 	
public 
static 
bool 
ValidarEmail '
(' (
string( .
email/ 4
)4 5
{ 	
if 
( 
new !
EmailAddressAttribute )
() *
)* +
.+ ,
IsValid, 3
(3 4
email4 9
)9 :
): ;
{ 
return 
true 
; 
} 
else 
{ 
return 
false 
; 
} 
} 	
public 
static 
bool 
IsCnpj %
(% &
string& ,
cnpj- 1
)1 2
{ 
int   
[   
]   
multiplicador1   $
=  % &
new  ' *
int  + .
[  . /
$num  / 1
]  1 2
{  3 4
$num  5 6
,  6 7
$num  8 9
,  9 :
$num  ; <
,  < =
$num  > ?
,  ? @
$num  A B
,  B C
$num  D E
,  E F
$num  G H
,  H I
$num  J K
,  K L
$num  M N
,  N O
$num  P Q
,  Q R
$num  S T
,  T U
$num  V W
}  X Y
;  Y Z
int!! 
[!! 
]!! 
multiplicador2!! $
=!!% &
new!!' *
int!!+ .
[!!. /
$num!!/ 1
]!!1 2
{!!3 4
$num!!5 6
,!!6 7
$num!!8 9
,!!9 :
$num!!; <
,!!< =
$num!!> ?
,!!? @
$num!!A B
,!!B C
$num!!D E
,!!E F
$num!!G H
,!!H I
$num!!J K
,!!K L
$num!!M N
,!!N O
$num!!P Q
,!!Q R
$num!!S T
,!!T U
$num!!V W
,!!W X
$num!!Y Z
}!![ \
;!!\ ]
int"" 
soma"" 
;"" 
int## 
resto## 
;## 
string$$ 
digito$$ 
;$$ 
string%% 
tempCnpj%% 
;%%  
cnpj&& 
=&& 
cnpj&& 
.&& 
Trim&&  
(&&  !
)&&! "
;&&" #
cnpj'' 
='' 
cnpj'' 
.'' 
Replace'' #
(''# $
$str''$ '
,''' (
$str'') +
)''+ ,
.'', -
Replace''- 4
(''4 5
$str''5 8
,''8 9
$str'': <
)''< =
.''= >
Replace''> E
(''E F
$str''F I
,''I J
$str''K M
)''M N
;''N O
if(( 
((( 
cnpj(( 
.(( 
Length(( 
!=((  "
$num((# %
)((% &
return)) 
false))  
;))  !
tempCnpj** 
=** 
cnpj** 
.**  
	Substring**  )
(**) *
$num*** +
,**+ ,
$num**- /
)**/ 0
;**0 1
soma++ 
=++ 
$num++ 
;++ 
for,, 
(,, 
int,, 
i,, 
=,, 
$num,, 
;,, 
i,,  !
<,," #
$num,,$ &
;,,& '
i,,( )
++,,) +
),,+ ,
soma-- 
+=-- 
int-- 
.--  
Parse--  %
(--% &
tempCnpj--& .
[--. /
i--/ 0
]--0 1
.--1 2
ToString--2 :
(--: ;
)--; <
)--< =
*--> ?
multiplicador1--@ N
[--N O
i--O P
]--P Q
;--Q R
resto.. 
=.. 
(.. 
soma.. 
%.. 
$num..  "
).." #
;..# $
if// 
(// 
resto// 
<// 
$num// 
)// 
resto00 
=00 
$num00 
;00 
else11 
resto22 
=22 
$num22 
-22  
resto22! &
;22& '
digito33 
=33 
resto33 
.33 
ToString33 '
(33' (
)33( )
;33) *
tempCnpj44 
=44 
tempCnpj44 #
+44$ %
digito44& ,
;44, -
soma55 
=55 
$num55 
;55 
for66 
(66 
int66 
i66 
=66 
$num66 
;66 
i66  !
<66" #
$num66$ &
;66& '
i66( )
++66) +
)66+ ,
soma77 
+=77 
int77 
.77  
Parse77  %
(77% &
tempCnpj77& .
[77. /
i77/ 0
]770 1
.771 2
ToString772 :
(77: ;
)77; <
)77< =
*77> ?
multiplicador277@ N
[77N O
i77O P
]77P Q
;77Q R
resto88 
=88 
(88 
soma88 
%88 
$num88  "
)88" #
;88# $
if99 
(99 
resto99 
<99 
$num99 
)99 
resto:: 
=:: 
$num:: 
;:: 
else;; 
resto<< 
=<< 
$num<< 
-<<  
resto<<! &
;<<& '
digito== 
=== 
digito== 
+==  !
resto==" '
.==' (
ToString==( 0
(==0 1
)==1 2
;==2 3
return>> 
cnpj>> 
.>> 
EndsWith>> $
(>>$ %
digito>>% +
)>>+ ,
;>>, -
}?? 
}@@ 	
}AA 